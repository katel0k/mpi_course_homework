# Домашнее задание по MPI

## Пояснения по структуре

Весь код с MPI находится в директории life. Дальнейшие пояснения кроме инструкции по включению сайта с просмотром все исполняются из этой директории.

Поскольку этапы сохранения и запуска кода не отличаются в зависимости от варианта декомпозиции, они все вынесены в lib/life_lib.c и lib/common.c. Как таковые экзешники находятся в bin и соответствуют экзешникам на один шаг программы, на полный cfg файл и на замер времени.

## Компиляция

```bash
make one_row # построчная декомпозиция
make one_col # поколоночная декомпозиция
make one_scat # с использованием MPI_Gather 
make one_dec # с декартовыми координатами
```

## Использование

```bash
cd bin
mpiexec -n <num_of_procs > ./one_step.exe <path_to_rle >
```

Выполняет один шаг жизни в соответствии со скомпилированным ранее вариантом декомпозиции. Результат сохраняется в life/life.raw

## Замер времени

```bash
make time_dec
cd life/bin
mpiexec -n <num_of_procs > ./time.exe <path_to_cfg >
```

Используя декартову декомпозицию, скрипт выполняет все шаги жизни из cfg файла, сохраняет результат в life/life.vtk и выводит время потраченное на MPI без учета IO

## Для запуска на кластере

```bash
python3 life/graphics/measure.py
scp -P 52960 -r life mipt2423@remote.vdi.mipt.ru:~/
ssh -p 52960 mipt2423@remote.vdi.mipt.ru
cd life
make time_dec
qsub graphics/job.sh
```
